<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="[大餐]2020年最新使用gradle构建、上传并发布jar包/aar包到jcenter方法整理"><meta name="keywords" content="android,aar,meals,jcenter,jar"><meta name="author" content="Halohoop"><meta name="copyright" content="Halohoop"><title>[大餐]2020年最新使用gradle构建、上传并发布jar包/aar包到jcenter方法整理 | 卖牙膏的芖口钉</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8d386d3f58d003ed2f4b4d02e584d2ae";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-构建Jar包，并且上传到JCenter；"><span class="toc-number">1.</span> <span class="toc-text">1. 构建Jar包，并且上传到JCenter；</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-构建Aar包，并且上传到JCenter；"><span class="toc-number">2.</span> <span class="toc-text">2. 构建Aar包，并且上传到JCenter；</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-跳过1和2，直接使用打包封装好的上传发布插件，省去较为繁琐的配置；"><span class="toc-number">3.</span> <span class="toc-text">3. 跳过1和2，直接使用打包封装好的上传发布插件，省去较为繁琐的配置；</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-number"></span> <span class="toc-text">References</span></a></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://cdn.jsdelivr.net/gh/halohoop/cdn/github/avatar.jpg"></div><div class="author-info__name text-center">Halohoop</div><div class="author-info__description text-center">我有病，你有药嘛？</div><div class="follow-button"><a href="https://github.com/halohoop">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">33</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">39</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">7</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://www.kfc.com">KFC</a><a class="author-info-links__name text-center" href="https://www.mcdonalds.com.cn">Mcdonalds</a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">卖牙膏的芖口钉</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">[大餐]2020年最新使用gradle构建、上传并发布jar包/aar包到jcenter方法整理</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-03-05 23:32:02</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/jcenter/">jcenter</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p><strong><em>声明：博文未经授权一律不允转载</em></strong></p>
<p>下文中的所有操作基于的环境为：<br>    <code>MacOS v10.15.3 + Java v1.8 + Gradle v6.4 + Kotlin v1.3.41 + Android SDK</code><br>假设你已经具备以上环境；</p>
<h3 id="1-构建Jar包，并且上传到JCenter；"><a href="#1-构建Jar包，并且上传到JCenter；" class="headerlink" title="1. 构建Jar包，并且上传到JCenter；"></a>1. 构建Jar包，并且上传到JCenter；</h3><ul>
<li>TOC:</li>
<li><ol>
<li>gradle命令生成项目</li>
</ol>
</li>
<li><ol>
<li>添加发布插件；</li>
</ol>
</li>
<li><ol>
<li>定义生成相关产物的Gradle Tasks；</li>
</ol>
</li>
<li><ol>
<li>配置相关参数；</li>
</ol>
</li>
<li><ol>
<li>执行上传<code>task bintrayUpload</code></li>
</ol>
</li>
</ul>
<hr>
<ol>
<li>gradle命令生成项目<br> 我们在命令行用gradle命令帮我们生成一个项目； <figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mkdir 2020jcenterpublish</div><div class="line">cd 2020jcenterpublish</div><div class="line">mkdir javaLibraryJarKotlin</div><div class="line">cd javaLibraryJarKotlin</div><div class="line">gradle init</div><div class="line"><span class="meta">#</span><span class="bash"> 选择library -&gt;..-&gt; Kotlin项目(也可以选择Java)</span></div></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>这个时候在javaLibraryJarKotlin文件夹下，我们就得到了一个Gradle为我们生成的一个项目。
目录树如下：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── build.gradle</div><div class="line">├── gradle</div><div class="line">│   └── wrapper</div><div class="line">│       ├── gradle-wrapper.jar</div><div class="line">│       └── gradle-wrapper.properties</div><div class="line">├── gradlew</div><div class="line">├── gradlew.bat</div><div class="line">├── settings.gradle</div><div class="line">└── src</div><div class="line">    ├── main</div><div class="line">    │   ├── kotlin</div><div class="line">    │   │   └── com</div><div class="line">    │   │       └── halohoop</div><div class="line">    │   │           └── librarykotlinpublish</div><div class="line">    │   │               └── Library.kt</div><div class="line">    │   └── resources</div><div class="line">    └── test</div><div class="line">        ├── kotlin</div><div class="line">        │   └── com</div><div class="line">        │       └── halohoop</div><div class="line">        │           └── librarykotlinpublish</div><div class="line">        │               └── LibraryTest.kt</div><div class="line">        └── resources</div><div class="line">15 directories, 8 files</div></pre></td></tr></table></figure>

我们在这个工程的基础上再进行各种功能的迭代完善，现在假设这个就是我们最终编码完成的工程，我们要将其打包发布到JCenter。
</code></pre><ol>
<li><p>添加发布插件；</p>
 <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// rootProject/build.gradle</span></div><div class="line">plugins &#123;</div><div class="line">    <span class="comment">//省略一些代码...</span></div><div class="line">    id <span class="string">'com.jfrog.bintray'</span> version <span class="string">'1.8.5'</span></div><div class="line">    id <span class="string">'maven-publish'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>定义生成相关产物的Gradle Tasks；</p>
 <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// rootProject/build.gradle</span></div><div class="line"><span class="comment">//生成源码jar包task</span></div><div class="line">task sourcesJar(<span class="string">type:</span> Jar) &#123;</div><div class="line">    from sourceSets.main.allJava</div><div class="line">    archiveClassifier = <span class="string">'sources'</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//生成javadoc jar包task</span></div><div class="line">task javadocJar(<span class="string">type:</span> Jar) &#123;</div><div class="line">    from javadoc</div><div class="line">    archiveClassifier = <span class="string">'javadoc'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>配置相关参数；</p>
 <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// rootProject/build.gradle</span></div><div class="line">bintray &#123;</div><div class="line">    user = <span class="string">'TODO 设置你的bintray.com用户名'</span></div><div class="line">    key = <span class="string">"$&#123;project.hasProperty('apiKey') ? project.apiKey : "</span><span class="string">"&#125;"</span></div><div class="line">    override = <span class="literal">true</span><span class="comment">//TODO 如果有相同版本是否覆盖</span></div><div class="line">    publish = <span class="literal">true</span><span class="comment">//TODO 是否上传后直接发布</span></div><div class="line">    pkg &#123;</div><div class="line">        repo = <span class="string">'maven'</span><span class="comment">//TODO 设置发布的maven库，在“bintray.com/你的用户名页面”就能够看到所有逇maven库名称</span></div><div class="line">        name = project.name<span class="comment">//TODO 项目的名称</span></div><div class="line">        userOrg = user<span class="comment">//TODO 用户所在组织</span></div><div class="line">        licenses = [<span class="string">'Apache-2.0'</span>]<span class="comment">//TODO 设置开源库的开源协议</span></div><div class="line">        vcsUrl = <span class="string">"github.com/halohoop/2020jcenterpublish"</span><span class="comment">//TODO 设置开源库地址</span></div><div class="line">        issueTrackerUrl = <span class="string">"github.com/halohoop/2020jcenterpublish/issue"</span><span class="comment">//TODO 设置开源库issue地址</span></div><div class="line">        version &#123;</div><div class="line">            name = <span class="string">'0.0.1'</span><span class="comment">//TODO 设置版本号</span></div><div class="line">            desc = <span class="string">"javaLibraryJarKotlin 0.0.1 final"</span></div><div class="line">            released = <span class="keyword">new</span> Date()<span class="comment">//TODO 发布时间</span></div><div class="line">            vcsTag = <span class="string">'0.0.1'</span><span class="comment">//TODO 设置版本tag</span></div><div class="line"><span class="comment">//            attributes = ['gradle-plugin': 'com.use.less:com.use.less.gradle:gradle-useless-plugin']//可忽略的属性，有需求可以查看官方文档进行相关配置</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//TODO 添加publishing DSL中定义的名称</span></div><div class="line">    publications = [<span class="string">'MyPublication'</span>]</div><div class="line">&#125;</div><div class="line">publishing &#123;</div><div class="line">    publications &#123;</div><div class="line">        MyPublication(MavenPublication) &#123;</div><div class="line">            <span class="comment">//标准开源库，以下都三个文件是标配</span></div><div class="line">            artifact(jar)<span class="comment">//TODO 配置库jar包</span></div><div class="line">            artifact(sourcesJar)<span class="comment">//TODO 配置库源码jar包</span></div><div class="line">            artifact(javadocJar)<span class="comment">//TODO 配置库javadoc jar包</span></div><div class="line">            groupId <span class="string">"com.halohoop"</span><span class="comment">//包名</span></div><div class="line">            artifactId <span class="string">'javalibraryjarkotlin'</span><span class="comment">//库id</span></div><div class="line">            version <span class="string">'0.0.1'</span><span class="comment">//TODO 设置版本号</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>执行上传<code>task bintrayUpload</code><br> bintrayUpload这个任务是<code>com.jfrog.bintray</code>插件提供给我们的，只要我们配置好相关的DSL就能够顺利执行这个task。<br> 为了不让我们的bintray.com账户密码信息暴露在项目的源码中，上文中的bintray DSL中的key属性采用的是动态获取apiKey属性的方式进行取值，因此我们在执行上传<code>task bintrayUpload</code>的时候需要使用<code>-P</code>传递一个<code>apiKey</code>属性参数.<br> 格式：<code>-Pkey=value</code><br> 示例：<code>./gradlew bintrayUpload -PapiKey=你的bintray.com密码或者apikey</code><br> 这个apiKey我们在<a href="https://bintray.com/profile/edit" target="_blank" rel="external">https://bintray.com/profile/edit</a>就能够获取到，如下图：<br> <img src="https://cdn.jsdelivr.net/gh/halohoop/cdn@1.5/github/bintrayapikey.png" alt="apikey"></p>
<h3 id="2-构建Aar包，并且上传到JCenter；"><a href="#2-构建Aar包，并且上传到JCenter；" class="headerlink" title="2. 构建Aar包，并且上传到JCenter；"></a>2. 构建Aar包，并且上传到JCenter；</h3></li>
</ol>
<ul>
<li>TOC:</li>
<li><ol>
<li>使用IDE Android Studio生成一个Android项目</li>
</ol>
</li>
<li><ol>
<li>添加发布插件；</li>
</ol>
</li>
<li><ol>
<li>定义生成相关产物的Gradle Tasks；</li>
</ol>
</li>
<li><ol>
<li>配置相关参数；</li>
</ol>
</li>
<li><ol>
<li>执行上传<code>task bintrayUpload</code></li>
</ol>
</li>
</ul>
<hr>
<ol>
<li><p>使用IDE Android Studio生成一个Android项目<br> 由于官方已不再支持使用”android”命令行创建一个android工程，因此我们使用Android Studio创建一个Library工程，其中的App module的名称命名为“androidlibrary”</p>
<ul>
<li>见：<a href="https://developer.android.com/studio/tools/help/android" target="_blank" rel="external">https://developer.android.com/studio/tools/help/android</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">已删去了不必要的文件</div><div class="line">.</div><div class="line">├── androidlibrary</div><div class="line">│   ├── build.gradle</div><div class="line">│   ├── consumer-rules.pro</div><div class="line">│   ├── libs</div><div class="line">│   ├── proguard-rules.pro</div><div class="line">│   └── src</div><div class="line">│       ├── androidTest</div><div class="line">│       │   └── java</div><div class="line">│       │       └── com</div><div class="line">│       │           └── halohoop</div><div class="line">│       │               └── androidlibraryaarkotlin2</div><div class="line">│       │                   └── ExampleInstrumentedTest.java</div><div class="line">│       ├── main</div><div class="line">│       │   ├── AndroidManifest.xml</div><div class="line">│       │   ├── java</div><div class="line">│       │   │   └── com</div><div class="line">│       │   │       └── halohoop</div><div class="line">│       │   │           └── androidlibraryaarkotlin2</div><div class="line">│       │   │               └── Library.kt</div><div class="line">│       │   └── res</div><div class="line">│       │       └── drawable</div><div class="line">│       └── test</div><div class="line">│           └── java</div><div class="line">│               └── com</div><div class="line">│                   └── halohoop</div><div class="line">│                       └── androidlibraryaarkotlin2</div><div class="line">│                           └── ExampleUnitTest.java</div><div class="line">├── build.gradle</div><div class="line">├── gradle</div><div class="line">│   └── wrapper</div><div class="line">│       ├── gradle-wrapper.jar</div><div class="line">│       └── gradle-wrapper.properties</div><div class="line">├── gradle.properties</div><div class="line">├── gradlew</div><div class="line">├── gradlew.bat</div><div class="line">├── local.properties</div><div class="line">└── settings.gradle</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>将App Module修改为Library Module</p>
<ul>
<li>打开文件<code>./androidlibrary/build.gradle</code></li>
<li>将其中的插件<code>apply plugin: &#39;com.android.application&#39;</code>修改为<code>apply plugin: &#39;com.android.library&#39;</code></li>
<li>删去applicationId：<code>android { defaultConfig { applicationId &quot;xxx.xxxxx.xx&quot; }}</code></li>
</ul>
</li>
<li><p>添加发布插件； </p>
<ul>
<li>打开文件<code>./build.gradle</code>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">buildscript &#123;</div><div class="line">    //省略一些代码</div><div class="line">    dependencies &#123;</div><div class="line">        //省略一些代码</div><div class="line">        classpath &apos;com.jfrog.bintray.gradle:gradle-bintray-plugin:1.8.5&apos;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">allprojects &#123;</div><div class="line">    apply plugin: &apos;com.jfrog.bintray&apos;</div><div class="line">    apply plugin: &quot;maven-publish&quot;</div><div class="line">    //也可以将插件apply到相应的module的build.gradle文件中</div><div class="line">    //省略一些代码</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>定义生成相关产物的Gradle Tasks；</p>
 <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//生成源码jar包task</span></div><div class="line">task androidSourcesJar(<span class="string">type:</span> Jar) &#123;</div><div class="line">    classifier = <span class="string">'sources'</span></div><div class="line">    from android.sourceSets.main.java.srcDirs</div><div class="line">&#125;</div><div class="line">task androidJavadocs(<span class="string">type:</span> Javadoc) &#123;</div><div class="line">    title = <span class="string">"$&#123;getStringProperty("</span>mavProjectName<span class="string">")&#125; $&#123;project.version&#125; API"</span></div><div class="line">    description <span class="string">"Generates Javadoc"</span></div><div class="line">    source = android.sourceSets.main.java.srcDirs</div><div class="line">    classpath += files(android.bootClasspath)</div><div class="line">    android.libraryVariants.all &#123; variant -&gt;</div><div class="line">        <span class="keyword">if</span> (variant.name == <span class="string">'release'</span>) &#123;</div><div class="line">            owner.classpath += variant.javaCompileProvider.get().classpath</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    exclude <span class="string">'**/R.html'</span>, <span class="string">'**/R.*.html'</span>, <span class="string">'**/index.html'</span>, <span class="string">'**/*.kt'</span></div><div class="line">    options &#123;</div><div class="line">        windowTitle(<span class="string">"$&#123;getStringProperty("</span>mavProjectName<span class="string">")&#125; $&#123;project.version&#125; Reference"</span>)</div><div class="line">        locale = <span class="string">'en_US'</span></div><div class="line">        encoding = <span class="string">'UTF-8'</span></div><div class="line">        charSet = <span class="string">'UTF-8'</span></div><div class="line">        links(<span class="string">"http://docs.oracle.com/javase/7/docs/api/"</span>)</div><div class="line">        linksOffline(<span class="string">"http://d.android.com/reference"</span>, <span class="string">"$&#123;android.sdkDirectory&#125;/docs/reference"</span>)</div><div class="line">        setMemberLevel(JavadocMemberLevel.PUBLIC)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//生成javadoc jar包task</span></div><div class="line">task androidJavadocsJar(<span class="string">type:</span> Jar, <span class="string">dependsOn:</span> androidJavadocs) &#123;</div><div class="line">    classifier = <span class="string">'javadoc'</span></div><div class="line">    from androidJavadocs.destinationDir</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>配置相关参数；</p>
 <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//这里仅仅列出差异部分，其他部分可以参考1.4</span></div><div class="line"></div><div class="line"><span class="comment">//省略一些代码</span></div><div class="line"></div><div class="line">publishing &#123;</div><div class="line">    publications &#123;</div><div class="line">        MyPublication(MavenPublication) &#123;</div><div class="line">            <span class="comment">//标准开源库，以下都三个文件是标配</span></div><div class="line">            artifact(bundleReleaseAar)<span class="comment">//TODO 配置库aar包</span></div><div class="line">            artifact(androidSourcesJar)<span class="comment">//TODO 配置库源码jar包</span></div><div class="line">            artifact(androidJavadocsJar)<span class="comment">//TODO 配置库javadoc jar包</span></div><div class="line">            <span class="comment">//省略一些代码</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>执行上传<code>task bintrayUpload</code>(参考1.5)</p>
<h3 id="3-跳过1和2，直接使用打包封装好的上传发布插件，省去较为繁琐的配置；"><a href="#3-跳过1和2，直接使用打包封装好的上传发布插件，省去较为繁琐的配置；" class="headerlink" title="3. 跳过1和2，直接使用打包封装好的上传发布插件，省去较为繁琐的配置；"></a>3. 跳过1和2，直接使用打包封装好的上传发布插件，省去较为繁琐的配置；</h3></li>
<li><p>引入bintray插件;</p>
<ul>
<li><p>Java/Kotlin工程；</p>
  <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// rootProject/build.gradle</span></div><div class="line">plugins &#123;</div><div class="line">    <span class="comment">//省略一些代码...</span></div><div class="line">    id <span class="string">'com.jfrog.bintray'</span> version <span class="string">'1.8.5'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Android工程；</p>
  <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// rootProject/build.gradle</span></div><div class="line">buildscript &#123;</div><div class="line">    <span class="comment">//省略一些代码</span></div><div class="line">    dependencies &#123;</div><div class="line">        <span class="comment">//省略一些代码</span></div><div class="line">        classpath <span class="string">'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.8.5'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">allprojects &#123;</div><div class="line">    apply <span class="string">plugin:</span> <span class="string">'com.jfrog.bintray'</span></div><div class="line">    <span class="comment">//也可以将插件apply到相应的module的build.gradle文件中</span></div><div class="line">    <span class="comment">//省略一些代码</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>引入打包封装好的上传发布插件；</p>
 <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//java工程：rootProject/build.gradle</span></div><div class="line"><span class="comment">//android工程:rootProject/module/build.gradle</span></div><div class="line">apply <span class="string">from:</span> <span class="string">"https://cdn.jsdelivr.net/gh/halohoop/cdn@latest/utils/gradle/bintrayIntegrated.gradle"</span></div></pre></td></tr></table></figure>
</li>
<li><p>定义属性参数<br> 各个属性的意义可以通过名称命名去体现；</p>
 <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//java工程：rootProject/build.gradle</span></div><div class="line"><span class="comment">//android工程:rootProject/module/build.gradle</span></div><div class="line">project.ext &#123;</div><div class="line">    bintrayUser = <span class="string">"halohoop"</span></div><div class="line">    groupId = <span class="string">"com.halohoop"</span></div><div class="line">    artifactId = project.name</div><div class="line">    version = <span class="string">"0.0.3"</span></div><div class="line">    javadocDir = <span class="string">"src/main/java"</span></div><div class="line">    sourceDir = <span class="string">"src"</span></div><div class="line">    bintrayOverride = <span class="literal">true</span></div><div class="line">    bintrayPublish = <span class="literal">true</span></div><div class="line">    bintrayPkgRepo = <span class="string">"maven"</span></div><div class="line">    bintrayPkgName = project.name</div><div class="line">    bintrayPkgUserOrg = project.ext.bintrayUser</div><div class="line">    bintrayPkgLicenses = [<span class="string">'Apache-2.0'</span>]</div><div class="line">    bintrayPkgVcsUrl = <span class="string">"github.com/$&#123;project.ext.bintrayUser&#125;/$&#123;project.ext.bintrayPkgName&#125;.git"</span></div><div class="line">    bintrayPkgIssueTrackerUrl = <span class="string">"github.com/$&#123;project.ext.bintrayUser&#125;/$&#123;project.ext.bintrayPkgName&#125;/issue"</span></div><div class="line">    bintrayPkgVersionDesc = <span class="string">"$&#123;project.ext.bintrayPkgName&#125; $&#123;project.ext.version&#125; final"</span></div><div class="line">    bintrayPkgVersionReleased = <span class="keyword">new</span> Date()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>个人水平有限，欢迎读者勘误。</p>
<ul>
<li>Wechat: halohoop<ul>
<li><a href="https://cdn.jsdelivr.net/gh/halohoop/cdn/github/halohoop_wechat.jpeg" target="_blank" rel="external"><img src="https://cdn.jsdelivr.net/gh/halohoop/cdn/imgs/halohoop_wechat_small.png" alt="wechat"></a></li>
</ul>
</li>
<li>E-mail: <a href="mailto:halohoopwong@gmail.com" target="_blank" rel="external">halohoopwong@gmail.com</a><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ol>
<li><a href="https://guides.gradle.org/creating-new-gradle-builds/" target="_blank" rel="external">Creating New Gradle Builds</a></li>
<li><a href="https://github.com/sky-uk/gradle-maven-plugin" target="_blank" rel="external">https://github.com/sky-uk/gradle-maven-plugin</a></li>
</ol>
</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Halohoop</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://halohoop.com/2020/03/05/meals-2020publish2jcenter/">http://halohoop.com/2020/03/05/meals-2020publish2jcenter/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/android/">android</a><a class="post-meta__tags" href="/tags/aar/">aar</a><a class="post-meta__tags" href="/tags/meals/">meals</a><a class="post-meta__tags" href="/tags/jcenter/">jcenter</a><a class="post-meta__tags" href="/tags/jar/">jar</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/03/08/tricks_of_mac_001/"><i class="fa fa-chevron-left">  </i><span>tricks_of_mac-001-MacOS对话框脱离鼠标操作</span></a></div><div class="next-post pull-right"><a href="/2020/02/02/about_2019_ncov/"><span>整理：关于武汉肺炎可以普及的'知识'</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;1997 - 2020 By Halohoop</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>